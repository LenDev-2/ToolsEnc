<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Serious Encryptor</title>

<style>
:root{
  --bg:#020617;
  --card:rgba(15,23,42,.8);
  --border:rgba(148,163,184,.25);
  --text:#e5e7eb;
  --muted:#94a3b8;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:radial-gradient(circle at top,#020b2a,#020617 65%);
  font-family:monospace;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:16px;
}
.card{
  width:100%;
  max-width:560px;
  background:var(--card);
  backdrop-filter:blur(12px);
  border:1px solid var(--border);
  border-radius:18px;
  padding:22px;
}
h2{text-align:center;color:#c7d2fe}
label{
  font-size:12px;
  color:var(--muted);
  margin-top:12px;
  display:block;
}
textarea,input{
  width:100%;
  margin-top:6px;
  padding:12px;
  background:#020617;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:10px;
  font-family:monospace;
}
textarea{min-height:140px}
.actions{
  display:flex;
  gap:10px;
  margin-top:14px;
}
button{
  flex:1;
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:bold;
  cursor:pointer;
}
.encrypt{background:#2563eb;color:white}
.copy{
  margin-top:10px;
  background:#020617;
  border:1px dashed var(--border);
  color:#94a3b8;
}
</style>
</head>

<body>
<div class="card">
  <h2>AES-256-GCM Loader Generator â€” LenzDev-2</h2>

  <label>JAVASCRIPT ASLI</label>
  <textarea id="text" placeholder="Paste JS asli di sini"></textarea>

  <label>PASSWORD</label>
  <input id="password" type="password" placeholder="Password kuat">

  <div class="actions">
    <button class="encrypt" onclick="build()">ENCRYPT & BUILD</button>
  </div>

  <label>HASIL (SIAP PASTE)</label>
  <textarea id="result" placeholder="Ini langsung script yang jalan"></textarea>
  <button class="copy" onclick="copyResult()">COPY RESULT</button>
</div>

<script>
const ENC=new TextEncoder(),DEC=new TextDecoder();
const b64=b=>btoa(String.fromCharCode(...new Uint8Array(b)));
const ub64=b=>Uint8Array.from(atob(b),c=>c.charCodeAt(0));

async function key(p,s){
  const m=await crypto.subtle.importKey(
    "raw",ENC.encode(p),"PBKDF2",false,["deriveKey"]
  );
  return crypto.subtle.deriveKey(
    {name:"PBKDF2",salt:s,iterations:100000,hash:"SHA-256"},
    m,{name:"AES-GCM",length:256},false,["encrypt","decrypt"]
  );
}

async function build(){
  const js=document.getElementById("text").value;
  const pass=document.getElementById("password").value;
  if(!js||!pass) return alert("JS & password jangan kosong");

  const salt=crypto.getRandomValues(new Uint8Array(16));
  const iv=crypto.getRandomValues(new Uint8Array(12));
  const k=await key(pass,salt);

  const enc=await crypto.subtle.encrypt(
    {name:"AES-GCM",iv},k,ENC.encode(js)
  );

  const payload=btoa(JSON.stringify({
    s:b64(salt), i:b64(iv), d:b64(enc)
  }));

  const loader=`<script>
(async()=>{
const p="${payload}";
const k=["${pass.slice(0,3)}","${pass.slice(3)}"].join("");
const e=new TextEncoder(),d=new TextDecoder();
const u=b=>Uint8Array.from(atob(b),c=>c.charCodeAt(0));
async function g(pw,s){
const m=await crypto.subtle.importKey("raw",e.encode(pw),"PBKDF2",false,["deriveKey"]);
return crypto.subtle.deriveKey(
{name:"PBKDF2",salt:s,iterations:100000,hash:"SHA-256"},
m,{name:"AES-GCM",length:256},false,["decrypt"]);
}
const o=JSON.parse(atob(p));
const kk=await g(k,u(o.s));
const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:u(o.i)},kk,u(o.d));
new Function(d.decode(r))();
})();
<\/script>`;

  document.getElementById("result").value=loader;
}

function copyResult(){
  const r=document.getElementById("result");
  r.value&&navigator.clipboard.writeText(r.value);
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HTML Encryptor — Final</title>

<style>
:root{
  --bg:#0b1220;
  --card:#111827;
  --border:#1f2937;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --blue:#3b82f6;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(180deg,#0b1220,#020617);
  font-family:monospace;
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:14px;
}

.card{
  width:100%;
  max-width:640px;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:16px;
  padding:18px;
}

h3{
  margin:0 0 10px;
  text-align:center;
  color:#dbeafe;
  font-size:18px;
}

label{
  font-size:12px;
  color:var(--muted);
  margin-top:10px;
  display:block;
}

textarea,input,button{
  width:100%;
  margin-top:6px;
  padding:12px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--text);
  font-family:monospace;
  font-size:14px;
}

textarea{
  min-height:160px;
  resize:vertical;
}

button{
  margin-top:14px;
  background:linear-gradient(135deg,#1e40af,#3b82f6);
  border:none;
  font-weight:bold;
  cursor:pointer;
}

button:active{transform:scale(.97)}

@media(max-width:480px){
  textarea{min-height:140px}
  h3{font-size:16px}
}
</style>
</head>

<body>
<div class="card">
  <h3>HTML Encryptor · Auto Run</h3>

  <label>HTML FULL</label>
  <textarea id="html" placeholder="<!DOCTYPE html> ..."></textarea>

  <label>PASSWORD</label>
  <input id="pwd" type="password" placeholder="Password kuat">

  <button onclick="build()">ENCRYPT HTML</button>

  <label>HASIL (SIAP DIPAKAI)</label>
  <textarea id="out" placeholder="Copy hasil ini ke file target"></textarea>
</div>

<script>
const E=new TextEncoder(),D=new TextDecoder();
const b64=b=>btoa(String.fromCharCode(...new Uint8Array(b)));
const ub64=b=>Uint8Array.from(atob(b),c=>c.charCodeAt(0));

async function key(p,s){
 const m=await crypto.subtle.importKey("raw",E.encode(p),"PBKDF2",false,["deriveKey"]);
 return crypto.subtle.deriveKey(
  {name:"PBKDF2",salt:s,iterations:120000,hash:"SHA-256"},
  m,{name:"AES-GCM",length:256},false,["encrypt","decrypt"]
 );
}

async function build(){
 const html=document.getElementById("html").value;
 const pass=document.getElementById("pwd").value;
 if(!html||!pass) return alert("Lengkapi dulu");

 const s=crypto.getRandomValues(new Uint8Array(16));
 const i=crypto.getRandomValues(new Uint8Array(12));
 const k=await key(pass,s);
 const c=await crypto.subtle.encrypt({name:"AES-GCM",iv:i},k,E.encode(html));
 const payload=btoa(JSON.stringify({s:b64(s),i:b64(i),d:b64(c)}));

 const loader=`<!DOCTYPE html><html><head><meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Loading...</title></head><body>
<script>
(()=>{const run=async()=>{try{
const P="${payload}";
const e=new TextEncoder(),d=new TextDecoder();
const u=b=>Uint8Array.from(atob(b),c=>c.charCodeAt(0));
const pass="${pass}";
const o=JSON.parse(atob(P));
const m=await crypto.subtle.importKey("raw",e.encode(pass),"PBKDF2",false,["deriveKey"]);
const k=await crypto.subtle.deriveKey(
 {name:"PBKDF2",salt:u(o.s),iterations:120000,hash:"SHA-256"},
 m,{name:"AES-GCM",length:256},false,["decrypt"]
);
const r=await crypto.subtle.decrypt(
 {name:"AES-GCM",iv:u(o.i)},k,u(o.d)
);
document.open();document.write(d.decode(r));document.close();
}catch{document.body.innerHTML="<h2 style=color:white>DECRYPT FAIL</h2>"}};
run();
})();
<\/script>
</body></html>`;

 document.getElementById("out").value=loader;
}
</script>
</body>
</html>
